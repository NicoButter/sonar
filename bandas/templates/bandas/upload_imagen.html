{% extends 'base.html' %}

{% load static %}

{% block title %}Editar Imágenes de Banda{% endblock %}

{% block header_title %}Gestionar Imágenes de: {{ banda.nombre|default:"Sin Banda" }}{% endblock %}

{% block extra_styles %}
    <link rel="stylesheet" href="{% static 'bandas/css/upload_imagen_styles.css' %}">
{% endblock %}

{% block content %}
  <div class="container">
    <!-- Mostrar imágenes subidas como tarjetas -->
    <h3>Imágenes Subidas:</h3>
    <div class="row">
      {% for imagen in banda.imagenes.all %}
        <div class="col-md-3">
          <div class="card">
            <img src="{{ imagen.imagen.url }}" class="card-img-top" alt="Imagen de la Banda">
            <div class="card-body">
              <a href="{% url 'eliminar_imagen' imagen.id %}" class="btn btn-danger btn-sm">Eliminar</a>
            </div>
          </div>
        </div>
      {% empty %}
        <p>No hay imágenes subidas aún.</p>
      {% endfor %}
    </div>

    <!-- Enlace para editar la imagen representativa -->
    <div class="mt-4">
      <h4>Actualizar Imagen Representativa</h4>
      <p>Haz clic para elegir la imagen principal de la banda.</p>
      <a href="{% url 'actualizar_imagen_representativa' banda.id %}" class="btn btn-primary">Editar Imagen Representativa</a>
    </div>

    <!-- Formulario para subir nuevas imágenes -->
    <h3 class="mt-4">Subir Nueva Imagen:</h3>
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <label for="imagenes">Seleccionar Imágenes (máximo 5):</label>
      <input type="file" name="imagenes" multiple required>
      <button type="submit" class="btn btn-success">Subir Imágenes</button>
    </form>
  </div>
{% endblock %}
