{% extends 'base.html' %}

{% load static %}

{% block extra_styles %}
    <link rel="stylesheet" href="{% static 'accounts/css/landing_page_styles.css' %}">
{% endblock %}    
    
{% block title %}Sonar - M√∫sica Local de R√≠o Gallegos{% endblock %}

{% block header_title %}¬°Bienvenido a Sonar!{% endblock %}
    
{% block content %}
    <div id="landing-content">
        <p>Con√©ctate con la m√∫sica que amas en R√≠o Gallegos y alrededores.</p>
    </div>

    <!-- Secci√≥n Top 10 Descargas -->
    <section class="top-downloads-section">
        <div class="container">
            <h2 class="section-title">üéµ Top 10 Descargas</h2>
            <p class="section-subtitle">Las bandas m√°s escuchadas de la escena local</p>
            
            {% if top_bandas %}
                <div class="bandas-grid">
                    {% for banda in top_bandas %}
                        <div class="banda-card">
                            <div class="banda-image">
                                {% if banda.imagen_principal %}
                                    <img src="{{ banda.imagen_principal.url }}" alt="Imagen de {{ banda.nombre }}">
                                {% else %}
                                    <img src="{% static 'images/no-image.png' %}" alt="Sin imagen">
                                {% endif %}
                            </div>
                            <div class="banda-info">
                                <h3>{{ banda.nombre }}</h3>
                                <p class="banda-descargas">{{ banda.descargas }} descargas</p>
                                {% if banda.demos %}
                                    <a href="{% url 'descargar_demo' banda.id %}" class="btn-download">
                                        üì• Descargar Demo
                                    </a>
                                {% endif %}
                                <a href="{% url 'banda_detail' banda.id %}" class="btn-view">
                                    Ver Banda
                                </a>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="no-content">A√∫n no hay demos disponibles. ¬°S√© el primero en subir uno!</p>
            {% endif %}
        </div>
    </section>

    <!-- Secci√≥n Eventos Recientes -->
    <section class="events-section">
        <div class="container">
            <h2 class="section-title">üìÖ Eventos Recientes</h2>
            <p class="section-subtitle">Novedades de la escena musical en Santa Cruz</p>
            
            {% if eventos_recientes %}
                <div class="events-grid">
                    {% for evento in eventos_recientes %}
                        <div class="event-card">
                            <div class="event-header">
                                <h3>{{ evento.titulo }}</h3>
                                <p class="event-date">{{ evento.fecha|date:"d/m/Y H:i" }}</p>
                            </div>
                            <div class="event-location">
                                üìç {{ evento.ubicacion }}
                            </div>
                            <div class="event-description">
                                {{ evento.descripcion|truncatechars:150 }}
                            </div>
                            {% if evento.organizador %}
                                <p class="event-organizer">Organizado por: {{ evento.organizador.username }}</p>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="no-content">No hay eventos programados actualmente.</p>
            {% endif %}
        </div>
    </section>

    <!-- Secci√≥n Call to Action -->
    <section class="cta-section">
        <div class="container">
            <h2>¬øSos m√∫sico?</h2>
            <p>Registra tu banda y forma parte de la comunidad musical de R√≠o Gallegos.</p>
            <a href="{% url 'login' %}" class="btn-primary">Iniciar Sesi√≥n</a>
            <a href="{% url 'banda_list' %}" class="btn-secondary">Ver Todas las Bandas</a>
        </div>
    </section>
{% endblock %}
    